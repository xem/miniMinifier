<!doctype html>
<html>
  <head>
    <meta charset=utf-8>
    <title>CSS Mini Minifier</title>
    <style>
      /* Minifier's style */
      * { margin: 0; padding: 0; }
      html { background: #1F3D5B; font: normal 14px Calibri, Arial; }
      body { width: 800px; margin: 20px auto; padding: 10px 0 20px; text-align: center; background: #7997B5; }
      input { width: 750px; font: normal 11px monospace; letter-spacing: -1px; text-align: center; }
      textarea { width: 750px; height: 250px; font: normal 11px monospace; letter-spacing: -1px; }
      button { padding: 5px; }
    </style>
  </head>
  <body>
    <h1>CSS Mini Minifier v0.3</h1>
    <h3>The JavaScript CSS minifier that fits in a tweet!</h3>
    <br>
    <h3>The code:</h3>
    <br>
    <input value="css.replace(/\/\*(\s|.)*?\*\/|\s+/g,' ').replace(/^ *| *$|[ ;]*([{};,:!+>~\(\)]) */g,'$1').replace(/\)([^;{}])/g,') $1')">
    <br>
    <br>
    <h3>Try it!</h3>
    <br>
    <textarea id=css>/*! normalize.css v2.1.0 | MIT License | git.io/normalize */&#10;&#10;/* ==========================================================================&#10;   HTML5 display definitions&#10;   ========================================================================== */&#10;&#10;/**&#10; * Correct `block` display not defined in IE 8/9.&#10; */&#10;&#10;article,&#10;aside,&#10;details,&#10;figcaption,&#10;figure,&#10;footer,&#10;header,&#10;hgroup,&#10;main,&#10;nav,&#10;section,&#10;summary {&#10;    display: block;&#10;}&#10;&#10;/**&#10; * Correct `inline-block` display not defined in IE 8/9.&#10; */&#10;&#10;audio,&#10;canvas,&#10;video {&#10;    display: inline-block;&#10;}&#10;&#10;/**&#10; * Prevent modern browsers from displaying `audio` without controls.&#10; * Remove excess height in iOS 5 devices.&#10; */&#10;&#10;audio:not([controls]) {&#10;    display: none;&#10;    height: 0;&#10;}&#10;&#10;/**&#10; * Address styling not present in IE 8/9.&#10; */&#10;&#10;[hidden] {&#10;    display: none;&#10;}&#10;&#10;/* ==========================================================================&#10;   Base&#10;   ========================================================================== */&#10;&#10;/**&#10; * 1. Set default font family to sans-serif.&#10; * 2. Prevent iOS text size adjust after orientation change, without disabling&#10; *    user zoom.&#10; */&#10;&#10;html {&#10;    font-family: sans-serif; /* 1 */&#10;    -webkit-text-size-adjust: 100%; /* 2 */&#10;    -ms-text-size-adjust: 100%; /* 2 */&#10;}&#10;&#10;/**&#10; * Remove default margin.&#10; */&#10;&#10;body {&#10;    margin: 0;&#10;}&#10;&#10;/* ==========================================================================&#10;   Links&#10;   ========================================================================== */&#10;&#10;/**&#10; * Address `outline` inconsistency between Chrome and other browsers.&#10; */&#10;&#10;a:focus {&#10;    outline: thin dotted;&#10;}&#10;&#10;/**&#10; * Improve readability when focused and also mouse hovered in all browsers.&#10; */&#10;&#10;a:active,&#10;a:hover {&#10;    outline: 0;&#10;}&#10;&#10;/* ==========================================================================&#10;   Typography&#10;   ========================================================================== */&#10;&#10;/**&#10; * Address variable `h1` font-size and margin within `section` and `article`&#10; * contexts in Firefox 4+, Safari 5, and Chrome.&#10; */&#10;&#10;h1 {&#10;    font-size: 2em;&#10;    margin: 0.67em 0;&#10;}&#10;&#10;/**&#10; * Address styling not present in IE 8/9, Safari 5, and Chrome.&#10; */&#10;&#10;abbr[title] {&#10;    border-bottom: 1px dotted;&#10;}&#10;&#10;/**&#10; * Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome.&#10; */&#10;&#10;b,&#10;strong {&#10;    font-weight: bold;&#10;}&#10;&#10;/**&#10; * Address styling not present in Safari 5 and Chrome.&#10; */&#10;&#10;dfn {&#10;    font-style: italic;&#10;}&#10;&#10;/**&#10; * Address differences between Firefox and other browsers.&#10; */&#10;&#10;hr {&#10;    -moz-box-sizing: content-box;&#10;    box-sizing: content-box;&#10;    height: 0;&#10;}&#10;&#10;/**&#10; * Address styling not present in IE 8/9.&#10; */&#10;&#10;mark {&#10;    background: #ff0;&#10;    color: #000;&#10;}&#10;&#10;/**&#10; * Correct font family set oddly in Safari 5 and Chrome.&#10; */&#10;&#10;code,&#10;kbd,&#10;pre,&#10;samp {&#10;    font-family: monospace, serif;&#10;    font-size: 1em;&#10;}&#10;&#10;/**&#10; * Improve readability of pre-formatted text in all browsers.&#10; */&#10;&#10;pre {&#10;    white-space: pre-wrap;&#10;}&#10;&#10;/**&#10; * Set consistent quote types.&#10; */&#10;&#10;q {&#10;    quotes: "\201C" "\201D" "\2018" "\2019";&#10;}&#10;&#10;/**&#10; * Address inconsistent and variable font size in all browsers.&#10; */&#10;&#10;small {&#10;    font-size: 80%;&#10;}&#10;&#10;/**&#10; * Prevent `sub` and `sup` affecting `line-height` in all browsers.&#10; */&#10;&#10;sub,&#10;sup {&#10;    font-size: 75%;&#10;    line-height: 0;&#10;    position: relative;&#10;    vertical-align: baseline;&#10;}&#10;&#10;sup {&#10;    top: -0.5em;&#10;}&#10;&#10;sub {&#10;    bottom: -0.25em;&#10;}&#10;&#10;/* ==========================================================================&#10;   Embedded content&#10;   ========================================================================== */&#10;&#10;/**&#10; * Remove border when inside `a` element in IE 8/9.&#10; */&#10;&#10;img {&#10;    border: 0;&#10;}&#10;&#10;/**&#10; * Correct overflow displayed oddly in IE 9.&#10; */&#10;&#10;svg:not(:root) {&#10;    overflow: hidden;&#10;}&#10;&#10;/* ==========================================================================&#10;   Figures&#10;   ========================================================================== */&#10;&#10;/**&#10; * Address margin not present in IE 8/9 and Safari 5.&#10; */&#10;&#10;figure {&#10;    margin: 0;&#10;}&#10;&#10;/* ==========================================================================&#10;   Forms&#10;   ========================================================================== */&#10;&#10;/**&#10; * Define consistent border, margin, and padding.&#10; */&#10;&#10;fieldset {&#10;    border: 1px solid #c0c0c0;&#10;    margin: 0 2px;&#10;    padding: 0.35em 0.625em 0.75em;&#10;}&#10;&#10;/**&#10; * 1. Correct `color` not being inherited in IE 8/9.&#10; * 2. Remove padding so people aren't caught out if they zero out fieldsets.&#10; */&#10;&#10;legend {&#10;    border: 0; /* 1 */&#10;    padding: 0; /* 2 */&#10;}&#10;&#10;/**&#10; * 1. Correct font family not being inherited in all browsers.&#10; * 2. Correct font size not being inherited in all browsers.&#10; * 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome.&#10; */&#10;&#10;button,&#10;input,&#10;select,&#10;textarea {&#10;    font-family: inherit; /* 1 */&#10;    font-size: 100%; /* 2 */&#10;    margin: 0; /* 3 */&#10;}&#10;&#10;/**&#10; * Address Firefox 4+ setting `line-height` on `input` using `!important` in&#10; * the UA stylesheet.&#10; */&#10;&#10;button,&#10;input {&#10;    line-height: normal;&#10;}&#10;&#10;/**&#10; * Address inconsistent `text-transform` inheritance for `button` and `select`.&#10; * All other form control elements do not inherit `text-transform` values.&#10; * Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+.&#10; * Correct `select` style inheritance in Firefox 4+ and Opera.&#10; */&#10;&#10;button,&#10;select {&#10;    text-transform: none;&#10;}&#10;&#10;/**&#10; * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`&#10; *    and `video` controls.&#10; * 2. Correct inability to style clickable `input` types in iOS.&#10; * 3. Improve usability and consistency of cursor style between image-type&#10; *    `input` and others.&#10; */&#10;&#10;button,&#10;html input[type="button"], /* 1 */&#10;input[type="reset"],&#10;input[type="submit"] {&#10;    -webkit-appearance: button; /* 2 */&#10;    cursor: pointer; /* 3 */&#10;}&#10;&#10;/**&#10; * Re-set default cursor for disabled elements.&#10; */&#10;&#10;button[disabled],&#10;html input[disabled] {&#10;    cursor: default;&#10;}&#10;&#10;/**&#10; * 1. Address box sizing set to `content-box` in IE 8/9.&#10; * 2. Remove excess padding in IE 8/9.&#10; */&#10;&#10;input[type="checkbox"],&#10;input[type="radio"] {&#10;    box-sizing: border-box; /* 1 */&#10;    padding: 0; /* 2 */&#10;}&#10;&#10;/**&#10; * 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome.&#10; * 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome&#10; *    (include `-moz` to future-proof).&#10; */&#10;&#10;input[type="search"] {&#10;    -webkit-appearance: textfield; /* 1 */&#10;    -moz-box-sizing: content-box;&#10;    -webkit-box-sizing: content-box; /* 2 */&#10;    box-sizing: content-box;&#10;}&#10;&#10;/**&#10; * Remove inner padding and search cancel button in Safari 5 and Chrome&#10; * on OS X.&#10; */&#10;&#10;input[type="search"]::-webkit-search-cancel-button,&#10;input[type="search"]::-webkit-search-decoration {&#10;    -webkit-appearance: none;&#10;}&#10;&#10;/**&#10; * Remove inner padding and border in Firefox 4+.&#10; */&#10;&#10;button::-moz-focus-inner,&#10;input::-moz-focus-inner {&#10;    border: 0;&#10;    padding: 0;&#10;}&#10;&#10;/**&#10; * 1. Remove default vertical scrollbar in IE 8/9.&#10; * 2. Improve readability and alignment in all browsers.&#10; */&#10;&#10;textarea {&#10;    overflow: auto; /* 1 */&#10;    vertical-align: top; /* 2 */&#10;}&#10;&#10;/* ==========================================================================&#10;   Tables&#10;   ========================================================================== */&#10;&#10;/**&#10; * Remove most spacing between table cells.&#10; */&#10;&#10;table {&#10;    border-collapse: collapse;&#10;    border-spacing: 0;&#10;}</textarea>
    <br>
    <br>
    <button id=minify>Minify!</button>
    <br>
    <br>
    By <a href="http://twitter.com/MaximeEuziere">Maxime Euzi√®re</a> for <a href="http://140byt.es">140byt.es</a> (<a href="https://gist.github.com/xem/5059125">see Gist</a>) - <a href="http://github.com/xem/miniMinifier">Fork me / See source</a>
    <script>
      // Minifier's code
      
      var css = document.getElementById("css");
      var js = document.getElementById("js");
      var minify = document.getElementById("minify");
      minify.onclick = function(){
        var l1=css.value.length;
        css.value = min2(min(css.value));
        var l2=css.value.length;
        alert("Before: "+l1+"Bytes. After: "+l2+"Bytes. Saved: "+(100-Math.round(l2/l1*100))+"%.")
      };

      // Mini CSS minifier (140 bytes minified)
      // Trims all comments and useless spaces, tabs, line breaks.
      function min(c){
        return c
              .replace(/\/\*(\s|.)*?\*\/|\s+/g, ' ')               // replace comments, whitespaces, tabs, line breaks with a space
              .replace(/^ *| *$|[ ;]*([{};,:!+>~\(\)]) */g, '$1')  // trim spaces at the beginning and the end, trim spaces around [{};,:!+>~()] and trim ; before }
              .replace(/\)([^;{}])/g, ') $1');                     // IE bug: keep a space after ) unless it's followed by [;{}]
      }

      // Advanced minifier with more minification powers (426 bytes minified)
      // converts RGB to hex, minifies hex, removes 0 when it's alone before a point, and removes the unit if it's placed after  a 0.
      function min2(c){
        return c
              .replace(/\/\*(\s|.)*?\*\/|\s+/g, ' ')                // replace comments, whitespaces, tabs, line breaks with a space
              .replace(/^ *| *$|[ ;]*([{};,:!+>~\(\)]) */g, '$1')   // trim spaces at the beginning and the end, trim spaces around [{};,:!+>~()] and trim ; before }
              .replace(/\)([^;{}])/g, ') $1')                       // IE bug: keep a space after ) unless it's followed by [;{}]
              .replace(/([ :,])0\./g, '$1.')                        // trim zeros before .
              .replace(/([ :,])0(em|px|%)/g, '$10')                 // trim units after 0
              .replace(/rgb\((\d{1,}),(\d{1,}),(\d{1,})\)/g,        // convert rgb to hex
                function(h,a,b,c,i,p){
                  h = "#";
                  p = [a,b,c];
                  for(i in p){
                    h += ("0" + parseInt(p[i]).toString(16)).slice(-2);
                  }
                  return h;
                }) 
              .replace(/#[a-f0-9]{6}/gi,                            // reduce long hex colors if possible
                function(h,p){
                  p = h[2] + h[4] + h[6];
                  return p == h[1] + h[3] + h[5] ? "#" + p : h;
                })
      }

      // Shorter recursive version, but needs a number as second parameter (5 is generally enough) .
      function i(c,i){
        return(
        i--
        ? m
          (
            c
            .replace(/^ | $|[ ;]*([{};,:!+>~\(\)]) */g, '$1')
            .replace(/\s+|\/\*.*?\*\/|(\))([^;,{}])/g, '$1 $2'),
            i
          )
        : c
        )
      }
    </script>
  </body>
</html>